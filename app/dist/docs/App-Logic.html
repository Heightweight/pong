<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>App.Logic</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption empty">&nbsp;</span><ul class="links" id="page-menu"><li><a href="src/App.Logic.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">App.Logic</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Game">Game</a> = <a href="#v:Game">Game</a> {<ul class="subs"><li><a href="#v:p1">p1</a> :: Float</li><li><a href="#v:p2">p2</a> :: Float</li><li><a href="#v:ball">ball</a> :: Point</li><li><a href="#v:dir">dir</a> :: Float</li><li><a href="#v:vel">vel</a> :: Float</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:Result">Result</a><ul class="subs"><li>= <a href="#v:Ongoing">Ongoing</a></li><li>| <a href="#v:Player">Player</a></li><li>| <a href="#v:AI">AI</a></li><li>| <a href="#v:Idle">Idle</a></li><li>| <a href="#v:Paused">Paused</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:World">World</a> = <a href="#v:World">World</a> {<ul class="subs"><li><a href="#v:game">game</a> :: <a href="App-Logic.html#t:Game" title="App.Logic">Game</a></li><li><a href="#v:p1Score">p1Score</a> :: Int</li><li><a href="#v:p2Score">p2Score</a> :: Int</li><li><a href="#v:result">result</a> :: <a href="App-Logic.html#t:Result" title="App.Logic">Result</a></li><li><a href="#v:time">time</a> :: Float</li><li><a href="#v:idleTime">idleTime</a> :: Float</li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:Record">Record</a> = String</li><li class="src short"><a href="#v:startWorld">startWorld</a> :: <a href="App-Logic.html#t:World" title="App.Logic">World</a></li><li class="src short"><a href="#v:recordUncurry">recordUncurry</a> :: <a href="App-Logic.html#t:Record" title="App.Logic">Record</a> -&gt; (Float, Int)</li><li class="src short"><a href="#v:paddleAngle">paddleAngle</a> :: Float -&gt; Float -&gt; Float</li><li class="src short"><a href="#v:normalize">normalize</a> :: Float -&gt; Float</li><li class="src short"><a href="#v:moveBall">moveBall</a> :: Float -&gt; <a href="App-Logic.html#t:World" title="App.Logic">World</a> -&gt; <a href="App-Logic.html#t:World" title="App.Logic">World</a></li><li class="src short"><a href="#v:scoreCheck">scoreCheck</a> :: <a href="App-Logic.html#t:World" title="App.Logic">World</a> -&gt; <a href="App-Logic.html#t:World" title="App.Logic">World</a></li><li class="src short"><a href="#v:aiMove">aiMove</a> :: <a href="App-Logic.html#t:World" title="App.Logic">World</a> -&gt; <a href="App-Logic.html#t:World" title="App.Logic">World</a></li><li class="src short"><a href="#v:gameOver">gameOver</a> :: <a href="App-Logic.html#t:World" title="App.Logic">World</a> -&gt; <a href="App-Logic.html#t:World" title="App.Logic">World</a></li><li class="src short"><a href="#v:updateWorld">updateWorld</a> :: Float -&gt; <a href="App-Logic.html#t:World" title="App.Logic">World</a> -&gt; IO <a href="App-Logic.html#t:World" title="App.Logic">World</a></li><li class="src short"><a href="#v:eventHandler">eventHandler</a> :: Event -&gt; <a href="App-Logic.html#t:World" title="App.Logic">World</a> -&gt; IO <a href="App-Logic.html#t:World" title="App.Logic">World</a></li><li class="src short"><a href="#v:timeAsText">timeAsText</a> :: <a href="App-Logic.html#t:World" title="App.Logic">World</a> -&gt; String</li><li class="src short"><a href="#v:scoreAsText">scoreAsText</a> :: <a href="App-Logic.html#t:World" title="App.Logic">World</a> -&gt; String</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Game" class="def">Game</a> <a href="src/App.Logic.html#Game" class="link">Source</a> <a href="#t:Game" class="selflink">#</a></p><div class="doc"><p>A game value. It holds all necessary data to calculate the next game state depending on time.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Game" class="def">Game</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:p1" class="def">p1</a> :: Float</dfn><div class="doc"><p>x-coordinate of the player-controlled paddle</p></div></li><li><dfn class="src"><a id="v:p2" class="def">p2</a> :: Float</dfn><div class="doc"><p>x-coordinate of the computer-controlled paddle</p></div></li><li><dfn class="src"><a id="v:ball" class="def">ball</a> :: Point</dfn><div class="doc"><p>the coordinates of the ball</p></div></li><li><dfn class="src"><a id="v:dir" class="def">dir</a> :: Float</dfn><div class="doc"><p>the direction in which the ball is moving in radians</p></div></li><li><dfn class="src"><a id="v:vel" class="def">vel</a> :: Float</dfn><div class="doc"><p>the velocity of the ball</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Result" class="def">Result</a> <a href="src/App.Logic.html#Result" class="link">Source</a> <a href="#t:Result" class="selflink">#</a></p><div class="doc"><p>Describes the result and/or state of the current world.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Ongoing" class="def">Ongoing</a></td><td class="doc"><p>for games in progress</p></td></tr><tr><td class="src"><a id="v:Player" class="def">Player</a></td><td class="doc"><p>for finished games won by the player</p></td></tr><tr><td class="src"><a id="v:AI" class="def">AI</a></td><td class="doc"><p>for finished games won by the AI</p></td></tr><tr><td class="src"><a id="v:Idle" class="def">Idle</a></td><td class="doc"><p>for games that have not been started yet</p></td></tr><tr><td class="src"><a id="v:Paused" class="def">Paused</a></td><td class="doc"><p>for paused games</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Result">Instances</h4><details id="i:Result" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Result:Eq:1"></span> Eq <a href="App-Logic.html#t:Result" title="App.Logic">Result</a></span> <a href="src/App.Logic.html#line-34" class="link">Source</a> <a href="#t:Result" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Result:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="App-Logic.html">App.Logic</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="App-Logic.html#t:Result" title="App.Logic">Result</a> -&gt; <a href="App-Logic.html#t:Result" title="App.Logic">Result</a> -&gt; Bool</p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="App-Logic.html#t:Result" title="App.Logic">Result</a> -&gt; <a href="App-Logic.html#t:Result" title="App.Logic">Result</a> -&gt; Bool</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:World" class="def">World</a> <a href="src/App.Logic.html#World" class="link">Source</a> <a href="#t:World" class="selflink">#</a></p><div class="doc"><p>Describes the world of the game. Holds the game data and the score, time and result of the game.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:World" class="def">World</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:game" class="def">game</a> :: <a href="App-Logic.html#t:Game" title="App.Logic">Game</a></dfn><div class="doc"><p>the current game state</p></div></li><li><dfn class="src"><a id="v:p1Score" class="def">p1Score</a> :: Int</dfn><div class="doc"><p>player's score</p></div></li><li><dfn class="src"><a id="v:p2Score" class="def">p2Score</a> :: Int</dfn><div class="doc"><p>AI's score</p></div></li><li><dfn class="src"><a id="v:result" class="def">result</a> :: <a href="App-Logic.html#t:Result" title="App.Logic">Result</a></dfn><div class="doc"><p>the result/state of the current game</p></div></li><li><dfn class="src"><a id="v:time" class="def">time</a> :: Float</dfn><div class="doc"><p>the playtime (only includes active playing)</p></div></li><li><dfn class="src"><a id="v:idleTime" class="def">idleTime</a> :: Float</dfn><div class="doc"><p>the time of inactivity (only when the game is not being played)</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Record" class="def">Record</a> = String <a href="src/App.Logic.html#Record" class="link">Source</a> <a href="#t:Record" class="selflink">#</a></p><div class="doc"><p>Used for storing the time and result of a finished game.</p></div></div><div class="top"><p class="src"><a id="v:startWorld" class="def">startWorld</a> :: <a href="App-Logic.html#t:World" title="App.Logic">World</a> <a href="src/App.Logic.html#startWorld" class="link">Source</a> <a href="#v:startWorld" class="selflink">#</a></p><div class="doc"><p>The default world of the game. By default the game has not been started yet, the paddles and the ball are centered,
 and the ball direction is 0.72 (in radians)</p></div></div><div class="top"><p class="src"><a id="v:recordUncurry" class="def">recordUncurry</a> <a href="src/App.Logic.html#recordUncurry" class="link">Source</a> <a href="#v:recordUncurry" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="App-Logic.html#t:Record" title="App.Logic">Record</a></td><td class="doc"><p>the record string (minutes:seconds:miliseconds player:ai)</p></td></tr><tr><td class="src">-&gt; (Float, Int)</td><td class="doc"><p>the resulting time-player pair</p></td></tr></table></div><div class="doc"><p>Returns a pair of time in seconds and the player's score of a given record</p></div></div><div class="top"><p class="src"><a id="v:paddleAngle" class="def">paddleAngle</a> <a href="src/App.Logic.html#paddleAngle" class="link">Source</a> <a href="#v:paddleAngle" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Float</td><td class="doc"><p>the x-coordinate of the paddle</p></td></tr><tr><td class="src">-&gt; Float</td><td class="doc"><p>the x-coordinate of the ball</p></td></tr><tr><td class="src">-&gt; Float</td><td class="doc"><p>the resulting angle in radians</p></td></tr></table></div><div class="doc"><p>Returns the bounce angle of a ball hitting a paddle.</p></div></div><div class="top"><p class="src"><a id="v:normalize" class="def">normalize</a> <a href="src/App.Logic.html#normalize" class="link">Source</a> <a href="#v:normalize" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Float</td><td class="doc"><p>the coordinate to be normalized</p></td></tr><tr><td class="src">-&gt; Float</td><td class="doc"><p>the resulting coordinate</p></td></tr></table></div><div class="doc"><p>Returns a normalized coordinate for collision-avoidance purposes.</p></div></div><div class="top"><p class="src"><a id="v:moveBall" class="def">moveBall</a> <a href="src/App.Logic.html#moveBall" class="link">Source</a> <a href="#v:moveBall" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Float</td><td class="doc"><p>time passed in seconds</p></td></tr><tr><td class="src">-&gt; <a href="App-Logic.html#t:World" title="App.Logic">World</a></td><td class="doc"><p>the world to update</p></td></tr><tr><td class="src">-&gt; <a href="App-Logic.html#t:World" title="App.Logic">World</a></td><td class="doc"><p>the resulting world</p></td></tr></table></div><div class="doc"><p>Moves the ball in a set direction for a given time accounting for collisions.</p></div></div><div class="top"><p class="src"><a id="v:scoreCheck" class="def">scoreCheck</a> <a href="src/App.Logic.html#scoreCheck" class="link">Source</a> <a href="#v:scoreCheck" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="App-Logic.html#t:World" title="App.Logic">World</a></td><td class="doc"><p>the current world</p></td></tr><tr><td class="src">-&gt; <a href="App-Logic.html#t:World" title="App.Logic">World</a></td><td class="doc"><p>the world with updated score/field in case someone scored</p></td></tr></table></div><div class="doc"><p>Changes the score and the game state if any player scores.
 Also changes the speed of the ball for each point scored by the player.</p></div></div><div class="top"><p class="src"><a id="v:aiMove" class="def">aiMove</a> <a href="src/App.Logic.html#aiMove" class="link">Source</a> <a href="#v:aiMove" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="App-Logic.html#t:World" title="App.Logic">World</a></td><td class="doc"><p>the current world</p></td></tr><tr><td class="src">-&gt; <a href="App-Logic.html#t:World" title="App.Logic">World</a></td><td class="doc"><p>the world with updated paddle position</p></td></tr></table></div><div class="doc"><p>Moves the second player's paddle according to where the ball is.
 The bigger the player's score, the faster the paddle moves.</p></div></div><div class="top"><p class="src"><a id="v:gameOver" class="def">gameOver</a> <a href="src/App.Logic.html#gameOver" class="link">Source</a> <a href="#v:gameOver" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="App-Logic.html#t:World" title="App.Logic">World</a></td><td class="doc"><p>the current world</p></td></tr><tr><td class="src">-&gt; <a href="App-Logic.html#t:World" title="App.Logic">World</a></td><td class="doc"><p>the world with updated result.</p></td></tr></table></div><div class="doc"><p>Checks if the game is over and changes the result accordingly.
 The game ends once someone has scored 7 points.</p></div></div><div class="top"><p class="src"><a id="v:updateWorld" class="def">updateWorld</a> <a href="src/App.Logic.html#updateWorld" class="link">Source</a> <a href="#v:updateWorld" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Float</td><td class="doc"><p>time passed in seconds</p></td></tr><tr><td class="src">-&gt; <a href="App-Logic.html#t:World" title="App.Logic">World</a></td><td class="doc"><p>the current world</p></td></tr><tr><td class="src">-&gt; IO <a href="App-Logic.html#t:World" title="App.Logic">World</a></td><td class="doc"><p>the updated world wrapped in IO context</p></td></tr></table></div><div class="doc"><p>Updates the world according to the time passed.</p></div></div><div class="top"><p class="src"><a id="v:eventHandler" class="def">eventHandler</a> <a href="src/App.Logic.html#eventHandler" class="link">Source</a> <a href="#v:eventHandler" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Event</td><td class="doc"><p>the event to be processed</p></td></tr><tr><td class="src">-&gt; <a href="App-Logic.html#t:World" title="App.Logic">World</a></td><td class="doc"><p>the current world</p></td></tr><tr><td class="src">-&gt; IO <a href="App-Logic.html#t:World" title="App.Logic">World</a></td><td class="doc"><p>the updated world wrapped in IO context</p></td></tr></table></div><div class="doc"><p>Updates the world according to an input event.</p></div></div><div class="top"><p class="src"><a id="v:timeAsText" class="def">timeAsText</a> <a href="src/App.Logic.html#timeAsText" class="link">Source</a> <a href="#v:timeAsText" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="App-Logic.html#t:World" title="App.Logic">World</a></td><td class="doc"><p>the current world</p></td></tr><tr><td class="src">-&gt; String</td><td class="doc"><p>the time of active playing</p></td></tr></table></div><div class="doc"><p>Returns the time of the game in a (minutes:seconds:miliseconds) format.</p></div></div><div class="top"><p class="src"><a id="v:scoreAsText" class="def">scoreAsText</a> <a href="src/App.Logic.html#scoreAsText" class="link">Source</a> <a href="#v:scoreAsText" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="App-Logic.html#t:World" title="App.Logic">World</a></td><td class="doc"><p>the current world</p></td></tr><tr><td class="src">-&gt; String</td><td class="doc"><p>the current score</p></td></tr></table></div><div class="doc"><p>Returns the current score of the world in a (player score):(AI score) format.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.0</p></div></body></html>